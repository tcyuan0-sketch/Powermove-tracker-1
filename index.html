<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Breakdancing Power Move Scorer</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.98);
            border-radius: 8px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            color: white;
            padding: 30px;
            text-align: center;
            border-bottom: 3px solid #e74c3c;
        }
        
        .header h1 {
            font-size: 2.2em;
            margin-bottom: 8px;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.4);
            font-weight: 700;
            letter-spacing: 1px;
            text-transform: uppercase;
        }
        
        .header p {
            font-size: 1em;
            opacity: 0.9;
            font-weight: 500;
        }
        
        .table-container {
            padding: 30px;
            overflow-x: auto;
        }
        
        .section-title {
            margin: 30px 0 20px 0;
            color: #2c3e50;
            font-size: 1.3em;
            text-align: center;
            font-weight: 700;
            letter-spacing: 0.5px;
            text-transform: uppercase;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
        }
        
        th {
            background: linear-gradient(135deg, #2c3e50 0%, #3498db 100%);
            color: white;
            padding: 15px 12px;
            font-weight: 700;
            text-align: left;
            font-size: 0.9em;
            letter-spacing: 0.5px;
            text-transform: uppercase;
        }
        
        td {
            padding: 12px;
            border-bottom: 1px solid #ecf0f1;
            vertical-align: middle;
        }
        
        .basic { border-left: 3px solid #3498db; }
        .intermediate { border-left: 3px solid #f39c12; }
        .advanced { border-left: 3px solid #e74c3c; }
        
        .basic:hover { background: rgba(52, 152, 219, 0.1); }
        .intermediate:hover { background: rgba(243, 156, 18, 0.1); }
        .advanced:hover { background: rgba(231, 76, 60, 0.1); }
        
        .move-name {
            font-weight: 700;
            color: #2c3e50;
            letter-spacing: 0.3px;
        }
        
        .base-points {
            font-weight: 700;
            color: #27ae60;
        }
        
        .total-points {
            font-weight: 700;
            color: #e74c3c;
            font-size: 1.05em;
        }
        
        .slider-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            min-width: 180px;
        }
        
        .slider {
            width: 160px;
            height: 8px;
            border-radius: 4px;
            background: linear-gradient(90deg, #ecf0f1, #bdc3c7);
            outline: none;
            cursor: pointer;
            transition: all 0.2s ease;
            -webkit-appearance: none;
            appearance: none;
        }
        
        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: linear-gradient(135deg, #3498db, #2980b9);
            cursor: pointer;
            box-shadow: 0 2px 6px rgba(52, 152, 219, 0.3);
            transition: all 0.2s ease;
        }
        
        .slider::-webkit-slider-thumb:hover {
            background: linear-gradient(135deg, #2980b9, #3498db);
            transform: scale(1.1);
            box-shadow: 0 3px 10px rgba(52, 152, 219, 0.5);
        }
        
        .slider::-moz-range-thumb {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: linear-gradient(135deg, #3498db, #2980b9);
            cursor: pointer;
            box-shadow: 0 2px 6px rgba(52, 152, 219, 0.3);
            border: none;
            transition: all 0.2s ease;
        }
        
        .slider-label {
            font-size: 12px;
            font-weight: 600;
            color: #34495e;
            margin-top: 6px;
            text-align: center;
            min-height: 18px;
            line-height: 1.2;
        }
        
        .form-slider-container {
            display: flex;
            flex-direction: row;
            align-items: center;
            justify-content: center;
            min-width: 180px;
            height: 120px;
            position: relative;
        }
        
        .form-slider {
            width: 8px;
            height: 100px;
            border-radius: 4px;
            background: linear-gradient(180deg, #f39c12, #e67e22);
            outline: none;
            cursor: pointer;
            transition: all 0.2s ease;
            -webkit-appearance: slider-vertical;
            writing-mode: bt-lr;
            -webkit-writing-mode: vertical-lr;
            writing-mode: vertical-lr;
            transform: rotate(180deg);
        }
        
        .form-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: linear-gradient(135deg, #f39c12, #e67e22);
            cursor: pointer;
            box-shadow: 0 2px 6px rgba(243, 156, 18, 0.3);
            transition: all 0.2s ease;
        }
        
        .form-slider::-moz-range-thumb {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: linear-gradient(135deg, #f39c12, #e67e22);
            cursor: pointer;
            box-shadow: 0 2px 6px rgba(243, 156, 18, 0.3);
            border: none;
            transition: all 0.2s ease;
        }
        
        .form-slider-label {
            font-size: 11px;
            font-weight: 600;
            color: #34495e;
            margin-left: 10px;
            text-align: center;
            min-width: 60px;
            line-height: 1.2;
        }
        
        .toggle-switch {
            position: relative;
            width: 60px;
            height: 28px;
            background: linear-gradient(135deg, #95a5a6 0%, #7f8c8d 100%);
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid #bdc3c7;
            display: inline-block;
        }
        
        .toggle-switch.active {
            background: linear-gradient(135deg, #27ae60 0%, #2ecc71 100%);
            border-color: #27ae60;
        }
        
        .toggle-switch::before {
            content: '';
            position: absolute;
            top: 2px;
            left: 2px;
            width: 26px;
            height: 20px;
            background: white;
            border-radius: 2px;
            transition: all 0.3s ease;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }
        
        .toggle-switch.active::before {
            transform: translateX(28px);
        }
        
        .toggle-switch::after {
            content: 'NO';
            position: absolute;
            top: 50%;
            left: 32px;
            transform: translateY(-50%);
            font-size: 10px;
            font-weight: 700;
            color: white;
            letter-spacing: 0.5px;
            transition: all 0.3s ease;
        }
        
        .toggle-switch.active::after {
            content: 'YES';
            left: 6px;
        }
        
        .total-row {
            background: linear-gradient(135deg, #34495e 0%, #2c3e50 100%);
            color: white;
            font-weight: bold;
        }
        
        .total-row td {
            padding: 15px 12px;
            font-size: 1.1em;
            border-bottom: none;
        }
        
        .button-container {
            display: flex;
            gap: 15px;
            margin: 20px 30px;
            flex-wrap: wrap;
            justify-content: center;
        }
        
        .btn {
            padding: 12px 30px;
            color: white;
            border: none;
            border-radius: 4px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 700;
            letter-spacing: 0.5px;
            text-transform: uppercase;
        }
        
        .btn:hover {
            transform: translateY(-1px);
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
            box-shadow: 0 4px 15px rgba(231, 76, 60, 0.3);
            font-size: 1.1em;
            padding: 20px 40px;
            width: 100%;
            margin-bottom: 20px;
        }
        
        .btn-secondary {
            background: linear-gradient(135deg, #95a5a6 0%, #7f8c8d 100%);
            box-shadow: 0 2px 8px rgba(127, 140, 141, 0.3);
            min-width: 150px;
        }
        
        .score-display {
            background: linear-gradient(135deg, #27ae60 0%, #2ecc71 100%);
            color: white;
            padding: 20px;
            text-align: center;
            font-size: 1.4em;
            font-weight: 700;
            letter-spacing: 0.5px;
            margin-bottom: 20px;
            display: none;
        }
        
        .summary-section {
            display: none;
            padding: 30px;
            background: #f8f9fa;
            border-top: 3px solid #e74c3c;
        }
        
        .summary-title {
            color: #2c3e50;
            font-size: 1.5em;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 10px;
        }
        
        .summary-description {
            color: #7f8c8d;
            font-size: 1em;
            margin-bottom: 30px;
            font-weight: 500;
        }
        
        .charts-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-top: 20px;
        }
        
        .chart-box {
            background: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            border: 1px solid #ecf0f1;
        }
        
        .chart-title {
            font-size: 1.1em;
            font-weight: 700;
            color: #2c3e50;
            margin-bottom: 15px;
            text-transform: uppercase;
            letter-spacing: 0.3px;
        }
        
        .stat-row {
            display: flex;
            justify-content: space-between;
            margin: 8px 0;
            padding: 8px 12px;
            border-radius: 4px;
        }
        
        .stat-row.basic { background: linear-gradient(90deg, rgba(52, 152, 219, 0.1), rgba(41, 128, 185, 0.1)); }
        .stat-row.intermediate { background: linear-gradient(90deg, rgba(243, 156, 18, 0.1), rgba(230, 126, 34, 0.1)); }
        .stat-row.advanced { background: linear-gradient(90deg, rgba(231, 76, 60, 0.1), rgba(192, 57, 43, 0.1)); }
        
        .progress-bar {
            background: #ecf0f1;
            height: 20px;
            border-radius: 10px;
            overflow: hidden;
            margin: 10px 0;
        }
        
        .progress-fill {
            height: 100%;
            border-radius: 10px;
            transition: width 0.8s ease;
        }
        
        .progress-bar.basic .progress-fill { background: linear-gradient(90deg, #3498db, #2980b9); }
        .progress-bar.intermediate .progress-fill { background: linear-gradient(90deg, #f39c12, #e67e22); }
        .progress-bar.advanced .progress-fill { background: linear-gradient(90deg, #e74c3c, #c0392b); }
        
        .stat-label { font-weight: 600; color: #34495e; }
        .stat-value { font-weight: 700; color: #e74c3c; }
        
        .tooltip-completed {
            color: #27ae60 !important;
            font-weight: 700;
        }
        
        .info-icon {
            display: inline-block;
            width: 18px;
            height: 18px;
            background: #3498db;
            color: white;
            border-radius: 50%;
            text-align: center;
            line-height: 18px;
            font-size: 12px;
            font-weight: bold;
            cursor: pointer;
            margin-left: 5px;
            position: relative;
            vertical-align: middle;
        }
        
        .info-tooltip {
            position: absolute;
            background: #2c3e50;
            color: white;
            padding: 10px;
            border-radius: 6px;
            font-size: 13px;
            line-height: 1.4;
            width: 200px;
            top: 25px;
            left: 50%;
            transform: translateX(-50%);
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            z-index: 1000;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }
        
        .info-tooltip::before {
            content: '';
            position: absolute;
            top: -6px;
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 0;
            border-left: 6px solid transparent;
            border-right: 6px solid transparent;
            border-bottom: 6px solid #2c3e50;
        }
        
        .info-icon:hover .info-tooltip {
            opacity: 1;
            visibility: visible;
        }
        
        @media (max-width: 768px) {
            .container { margin: 10px; }
            .header h1 { font-size: 2em; }
            .table-container { padding: 15px; }
            th, td { padding: 8px 6px; font-size: 0.9em; }
            .toggle-switch { width: 50px; height: 24px; }
            .toggle-switch::before { width: 20px; height: 18px; }
            .toggle-switch.active::before { transform: translateX(24px); }
            .button-container { flex-direction: column; }
            .form-slider-container { height: 80px; }
            .form-slider { height: 60px; }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Power Move Scorer</h1>
            <p>Track your breakdancing skills and calculate your total score</p>
        </div>
        
        <div class="table-container">
            <table>
                <thead>
                    <tr>
                        <th>Powermove</th>
                        <th>Base Points</th>
                        <th>Times Performed</th>
                        <th>Form</th>
                        <th>Total Points</th>
                    </tr>
                </thead>
                <tbody id="powerMovesBody">
                </tbody>
            </table>
            
            <h3 class="section-title">Transitions</h3>
            
            <table>
                <thead>
                    <tr>
                        <th>Transition</th>
                        <th>Base Points</th>
                        <th style="text-align: center;">Performed?</th>
                        <th>Multiplier</th>
                        <th>Total Points</th>
                    </tr>
                </thead>
                <tbody id="transitionsBody">
                </tbody>
            </table>
        </div>
        
        <button class="btn btn-primary" onclick="calculateScore()">
            Calculate my Final Score
        </button>
        
        <div class="score-display" id="scoreDisplay">
            YOUR SCORE: <span id="finalScore">0</span> / <span id="maxScore">0</span> POINTS
        </div>
        
        <div class="summary-section" id="summarySection">
            <h3 class="summary-title">Performance Analysis</h3>
            <p class="summary-description">A comprehensive breakdown of your powermove and transition progression</p>
            
            <div class="charts-container">
                <div class="chart-box">
                    <div class="chart-title">Power Moves Analysis</div>
                    
                    <div class="stat-row basic">
                        <span class="stat-label">Basic Moves:
                            <span class="info-icon">i
                                <div class="info-tooltip">
                                    <div><strong>Basic Power Moves:</strong></div>
                                    <div>• Windmill (with hands)</div>
                                    <div>• Swipe</div>
                                    <div>• Cricket</div>
                                    <div>• Jackhammer</div>
                                    <div>• Headspin</div>
                                </div>
                            </span>
                        </span>
                        <span class="stat-value" id="basicMovesScore">0 / 5 (0%)</span>
                    </div>
                    <div class="progress-bar basic">
                        <div class="progress-fill" id="basicMovesProgress" style="width: 0%;"></div>
                    </div>
                    
                    <div class="stat-row intermediate">
                        <span class="stat-label">Intermediate Moves:
                            <span class="info-icon">i
                                <div class="info-tooltip">
                                    <div><strong>Intermediate Power Moves:</strong></div>
                                    <div>• Windmill (without hands)</div>
                                    <div>• Halo</div>
                                    <div>• Flare</div>
                                    <div>• 1990</div>
                                    <div>• 2000</div>
                                </div>
                            </span>
                        </span>
                        <span class="stat-value" id="intermediateMovesScore">0 / 5 (0%)</span>
                    </div>
                    <div class="progress-bar intermediate">
                        <div class="progress-fill" id="intermediateMovesProgress" style="width: 0%;"></div>
                    </div>
                    
                    <div class="stat-row advanced">
                        <span class="stat-label">Advanced Moves:
                            <span class="info-icon">i
                                <div class="info-tooltip">
                                    <div><strong>Advanced Power Moves:</strong></div>
                                    <div>• Left Handhop</div>
                                    <div>• Right Handhop</div>
                                    <div>• Left Elbow Hop</div>
                                    <div>• Right Elbow Hop</div>
                                    <div>• Airflare</div>
                                    <div>• Elbow Airflare</div>
                                </div>
                            </span>
                        </span>
                        <span class="stat-value" id="advancedMovesScore">0 / 6 (0%)</span>
                    </div>
                    <div class="progress-bar advanced">
                        <div class="progress-fill" id="advancedMovesProgress" style="width: 0%;"></div>
                    </div>
                </div>
                
                <div class="chart-box">
                    <div class="chart-title">Transition Analysis</div>
                    
                    <div class="stat-row basic">
                        <span class="stat-label">Basic Transitions (0-20 pts):
                            <span class="info-icon">i
                                <div class="info-tooltip">
                                    <div><strong>Basic Transitions (0-20 pts each):</strong></div>
                                    <div>• Windmill → Flare (4 pts)</div>
                                </div>
                            </span>
                        </span>
                        <span class="stat-value" id="basicTransitionsCount">0 / 1 (0%)</span>
                    </div>
                    <div class="progress-bar basic">
                        <div class="progress-fill" id="basicTransitionsProgress" style="width: 0%;"></div>
                    </div>
                    
                    <div class="stat-row intermediate">
                        <span class="stat-label">Intermediate Transitions (21-36 pts):
                            <span class="info-icon">i
                                <div class="info-tooltip">
                                    <div><strong>Intermediate Transitions (21-36 pts each):</strong></div>
                                    <div>• Windmill → 1990/2000 (28.8 pts)</div>
                                    <div>• Headspin → 1990/2000 (17.5 pts)</div>
                                    <div>• Halo → 1990/2000 (18 pts)</div>
                                    <div>• Flare → 1990/2000 (32.4 pts)</div>
                                    <div>• Handstand/1990/2000 → Flare (36 pts)</div>
                                </div>
                            </span>
                        </span>
                        <span class="stat-value" id="intermediateTransitionsCount">0 / 5 (0%)</span>
                    </div>
                    <div class="progress-bar intermediate">
                        <div class="progress-fill" id="intermediateTransitionsProgress" style="width: 0%;"></div>
                    </div>
                    
                    <div class="stat-row advanced">
                        <span class="stat-label">Advanced Transitions (>36 pts):
                            <span class="info-icon">i
                                <div class="info-tooltip">
                                    <div><strong>Advanced Transitions (>36 pts each):</strong></div>
                                    <div>• Windmill → Airflare (62 pts)</div>
                                    <div>• Headspin → Airflare (48.8 pts)</div>
                                    <div>• Halo → Airflare (49.5 pts)</div>
                                    <div>• Flare → Airflare (66 pts)</div>
                                    <div>• Various other high-level transitions</div>
                                </div>
                            </span>
                        </span>
                        <span class="stat-value" id="advancedTransitionsCount">0 / 12 (0%)</span>
                    </div>
                    <div class="progress-bar advanced">
                        <div class="progress-fill" id="advancedTransitionsProgress" style="width: 0%;"></div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="button-container">
            <button class="btn btn-secondary" onclick="resetAll()">Reset All Scores</button>
        </div>
    </div>

    <script>
        const moves = [
            {name: "Windmill (with hands)", base: 1, category: "basic"},
            {name: "Swipe", base: 1, category: "basic"},
            {name: "Cricket", base: 1, category: "basic"},
            {name: "Jackhammer", base: 2, category: "basic"},
            {name: "Headspin", base: 2.5, category: "basic"},
            {name: "Windmill (without hands)", base: 1.5, category: "intermediate"},
            {name: "Halo", base: 3, category: "intermediate"},
            {name: "Flare", base: 3, category: "intermediate"},
            {name: "1990", base: [15, 20, 40, 60, 90, 120, 150, 180, 210, 240], reps: ["1.5", "2", "3", "4", "5", "6", "7", "8", "9", "10"], category: "intermediate"},
            {name: "2000", base: [15, 20, 40, 60, 90, 120, 150, 180, 210, 240], reps: ["1.5", "2", "3", "4", "5", "6", "7", "8", "9", "10"], category: "intermediate"},
            {name: "Left Handhop", base: [15, 20, 40], reps: ["5-9", "10-19", "20-30"], category: "advanced"},
            {name: "Right Handhop", base: [15, 20, 40], reps: ["5-9", "10-19", "20-30"], category: "advanced"},
            {name: "Left Elbow Hop", base: [15, 20, 40], reps: ["5-9", "10-19", "20-30"], category: "advanced"},
            {name: "Right Elbow Hop", base: [15, 20, 40], reps: ["5-9", "10-19", "20-30"], category: "advanced"},
            {name: "Airflare", base: 30, category: "advanced"},
            {name: "Elbow Airflare", base: 30, category: "advanced"}
        ];

        const transitions = [
            {name: "Windmill → Flare", base: 4, multiplier: 1, category: "basic"},
            {name: "Windmill → Elbow AF", base: 31, multiplier: 1, category: "advanced"},
            {name: "Windmill → 1990/2000", base: 16, multiplier: 1.8, category: "intermediate"},
            {name: "Windmill → Airflare", base: 31, multiplier: 2, category: "advanced"},
            {name: "Headspin → Elbow AF", base: 32.5, multiplier: 1, category: "advanced"},
            {name: "Headspin → 1990/2000", base: 17.5, multiplier: 1, category: "intermediate"},
            {name: "Headspin → Airflare", base: 32.5, multiplier: 1.5, category: "advanced"},
            {name: "Halo → Elbow AF", base: 33, multiplier: 1, category: "advanced"},
            {name: "Halo → 1990/2000", base: 18, multiplier: 1, category: "intermediate"},
            {name: "Halo → Airflare", base: 33, multiplier: 1.5, category: "advanced"},
            {name: "Flare → 1990/2000", base: 18, multiplier: 1.8, category: "intermediate"},
            {name: "Flare → Airflare", base: 33, multiplier: 2, category: "advanced"},
            {name: "Handstand/1990/2000 → Flare", base: 18, multiplier: 2, category: "intermediate"},
            {name: "Handstand/1990/2000 → Airflare", base: 45, multiplier: 1, category: "advanced"},
            {name: "Handstand/1990/2000 → Elbow AF", base: 45, multiplier: 1, category: "advanced"},
            {name: "Elbow AF → Airflare", base: 60, multiplier: 2, category: "advanced"},
            {name: "Elbow AF → Assisted Elbow Flash", base: 60, multiplier: 2, category: "advanced"},
            {name: "Elbow AF → Real Elbow Flash", base: 60, multiplier: 2.5, category: "advanced"}
        ];

        function buildPowerMovesTable() {
            const tbody = document.getElementById('powerMovesBody');
            
            moves.forEach(move => {
                const row = document.createElement('tr');
                row.className = move.category;
                
                let html = `<td class="move-name">${move.name}</td>`;
                
                if (Array.isArray(move.base)) {
                    const maxPoints = Math.max(...move.base);
                    html += `
                        <td class="base-points">Variable</td>
                        <td>
                            <div class="slider-container">
                                <input type="range" class="slider special-reps-slider" 
                                       min="0" max="${move.reps.length}" value="0" step="1"
                                       data-bases='${JSON.stringify(move.base)}' 
                                       data-reps='${JSON.stringify(move.reps)}'
                                       onchange="updateScore(this)">
                                <div class="slider-label">None</div>
                            </div>
                        </td>
                        <td></td>
                        <td class="total-points">0/${maxPoints}</td>
                    `;
                } else if (move.name === "Flare") {
                    const maxPoints = (move.base * 10 * 1.5).toFixed(1);
                    html += `
                        <td class="base-points">${move.base}</td>
                        <td>
                            <div class="slider-container">
                                <input type="range" class="slider reps-slider" 
                                       min="0" max="10" value="0" step="1"
                                       data-base="${move.base}"
                                       onchange="updateScore(this)">
                                <div class="slider-label">0</div>
                            </div>
                        </td>
                        <td>
                            <div class="form-slider-container">
                                <input type="range" class="form-slider" 
                                       min="0" max="3" value="0" step="1"
                                       data-values='[0, 0.5, 0.75, 1.5]'
                                       data-labels='["Select", "Poor", "Moderate", "Best"]'
                                       onchange="updateScore(this)">
                                <div class="form-slider-label">Select</div>
                            </div>
                            <span class="info-icon">i
                                <div class="info-tooltip">
                                    <div><strong>Flare Form Multipliers:</strong></div>
                                    <div>Poor form + scrape: ×0.5</div>
                                    <div>Poor form + no scrape: ×0.75</div>
                                    <div>Good form + scrape: ×0.75</div>
                                    <div>Good form + no scrape: ×1.5</div>
                                </div>
                            </span>
                        </td>
                        <td class="total-points">0/${maxPoints}</td>
                    `;
                } else {
                    const maxPoints = (move.base * 10).toFixed(1);
                    html += `
                        <td class="base-points">${move.base}</td>
                        <td>
                            <div class="slider-container">
                                <input type="range" class="slider reps-slider" 
                                       min="0" max="10" value="0" step="1"
                                       data-base="${move.base}"
                                       onchange="updateScore(this)">
                                <div class="slider-label">0</div>
                            </div>
                        </td>
                        <td></td>
                        <td class="total-points">0/${maxPoints}</td>
                    `;
                }
                
                row.innerHTML = html;
                tbody.appendChild(row);
            });

            // Add total row
            const totalRow = document.createElement('tr');
            totalRow.className = 'total-row';
            totalRow.innerHTML = `
                <td colspan="4"><strong>POWERMOVES TOTAL</strong></td>
                <td class="total-points" id="powerMovesTotal">0</td>
            `;
            tbody.appendChild(totalRow);
        }

        function buildTransitionsTable() {
            const tbody = document.getElementById('transitionsBody');
            
            transitions.forEach(transition => {
                const row = document.createElement('tr');
                row.className = transition.category;
                const maxPoints = (transition.base * transition.multiplier).toFixed(1);
                
                row.innerHTML = `
                    <td class="move-name">${transition.name}</td>
                    <td class="base-points">${transition.base}</td>
                    <td style="text-align: center;">
                        <div class="toggle-switch" onclick="toggleSwitch(this)" 
                             data-base="${transition.base}" data-multiplier="${transition.multiplier}">
                        </div>
                    </td>
                    <td>${transition.multiplier > 1 ? `×${transition.multiplier}` : 'None'}</td>
                    <td class="total-points">0/${maxPoints}</td>
                `;
                tbody.appendChild(row);
            });

            // Add transitions total row
            const totalRow = document.createElement('tr');
            totalRow.className = 'total-row';
            totalRow.innerHTML = `
                <td colspan="4"><strong>TRANSITIONS TOTAL</strong></td>
                <td class="total-points" id="transitionsTotal">0</td>
            `;
            tbody.appendChild(totalRow);
        }

        function updateScore(slider) {
            const row = slider.closest('tr');
            const totalCell = row.querySelector('.total-points');
            const label = slider.parentNode.querySelector('.slider-label, .form-slider-label');
            
            let total = 0;
            let value = parseInt(slider.value);
            
            // Update label
            if (slider.classList.contains('special-reps-slider')) {
                if (value === 0) {
                    label.textContent = 'None';
                } else {
                    const reps = JSON.parse(slider.dataset.reps);
                    label.textContent = reps[value - 1];
                    const bases = JSON.parse(slider.dataset.bases);
                    total = bases[value - 1];
                }
            } else if (slider.classList.contains('form-slider')) {
                const labels = JSON.parse(slider.dataset.labels);
                label.textContent = labels[value];
                // Recalculate flare score when form changes
                const repsSlider = row.querySelector('.reps-slider');
                if (repsSlider) {
                    updateScore(repsSlider);
                }
                return;
            } else if (slider.classList.contains('reps-slider')) {
                label.textContent = value.toString();
                const basePoints = parseFloat(slider.dataset.base);
                const reps = value;
                
                // Check if this is a flare (has form slider)
                const formSlider = row.querySelector('.form-slider');
                if (formSlider) {
                    const formValues = JSON.parse(formSlider.dataset.values);
                    const multiplier = formValues[parseInt(formSlider.value)];
                    if (multiplier > 0) {
                        total = basePoints * reps * multiplier;
                    }
                } else {
                    total = basePoints * reps;
                }
            }
            
            // Update total cell
            if (totalCell && !totalCell.id) {
                const maxValue = totalCell.textContent.split('/')[1];
                totalCell.textContent = `${total.toFixed(1)}/${maxValue}`;
            }
            
            calculateTotals();
        }

        function toggleSwitch(element) {
            element.classList.toggle('active');
            
            const row = element.closest('tr');
            const totalCell = row.querySelector('.total-points');
            const basePoints = parseFloat(element.dataset.base);
            const multiplier = parseFloat(element.dataset.multiplier);
            
            let total = 0;
            if (element.classList.contains('active')) {
                total = basePoints * multiplier;
            }
            
            const maxValue = totalCell.textContent.split('/')[1];
            totalCell.textContent = `${total.toFixed(1)}/${maxValue}`;
            
            calculateTotals();
        }

        function calculateTotals() {
            // Power moves total
            let powerMovesTotal = 0;
            document.querySelectorAll('#powerMovesBody .total-points:not(#powerMovesTotal)').forEach(cell => {
                const value = parseFloat(cell.textContent.split('/')[0]);
                if (!isNaN(value)) powerMovesTotal += value;
            });
            
            // Transitions total
            let transitionsTotal = 0;
            document.querySelectorAll('#transitionsBody .total-points:not(#transitionsTotal)').forEach(cell => {
                const value = parseFloat(cell.textContent.split('/')[0]);
                if (!isNaN(value)) transitionsTotal += value;
            });
            
            document.getElementById('powerMovesTotal').textContent = powerMovesTotal.toFixed(1);
            document.getElementById('transitionsTotal').textContent = transitionsTotal.toFixed(1);
        }

        function calculateScore() {
            const powerMovesTotal = parseFloat(document.getElementById('powerMovesTotal').textContent);
            const transitionsTotal = parseFloat(document.getElementById('transitionsTotal').textContent);
            const grandTotal = powerMovesTotal + transitionsTotal;
            
            // Calculate max scores
            let maxPowerMoves = 0;
            moves.forEach(move => {
                if (Array.isArray(move.base)) {
                    maxPowerMoves += Math.max(...move.base);
                } else if (move.name === "Flare") {
                    maxPowerMoves += move.base * 10 * 1.5;
                } else {
                    maxPowerMoves += move.base * 10;
                }
            });
            
            const maxTransitions = transitions.reduce((sum, t) => sum + (t.base * t.multiplier), 0);
            const totalMax = maxPowerMoves + maxTransitions;
            
            document.getElementById('finalScore').textContent = grandTotal.toFixed(1);
            document.getElementById('maxScore').textContent = totalMax.toFixed(1);
            document.getElementById('scoreDisplay').style.display = 'block';
            
            generateAnalysis();
            document.getElementById('summarySection').style.display = 'block';
            
            setTimeout(() => {
                document.getElementById('summarySection').scrollIntoView({
                    behavior: 'smooth',
                    block: 'end'
                });
            }, 100);
        }

        function generateAnalysis() {
            const categories = { 
                basic: { completed: 0, total: 5, moves: [] }, 
                intermediate: { completed: 0, total: 5, moves: [] }, 
                advanced: { completed: 0, total: 6, moves: [] } 
            };
            
            // Check move completion and build lists
            moves.forEach(move => {
                let isCompleted = false;
                
                // Find the row for this move
                const rows = document.querySelectorAll('#powerMovesBody tr:not(.total-row)');
                for (let row of rows) {
                    const nameCell = row.querySelector('.move-name');
                    if (nameCell && nameCell.textContent === move.name) {
                        const totalCell = row.querySelector('.total-points');
                        if (totalCell) {
                            const currentScore = parseFloat(totalCell.textContent.split('/')[0]) || 0;
                            let maxScore = 0;
                            
                            if (Array.isArray(move.base)) {
                                maxScore = Math.max(...move.base);
                            } else if (move.name === "Flare") {
                                maxScore = move.base * 10 * 1.5;
                            } else {
                                maxScore = move.base * 10;
                            }
                            
                            if (currentScore >= maxScore) {
                                isCompleted = true;
                            }
                        }
                        break;
                    }
                }
                
                categories[move.category].moves.push({ name: move.name, completed: isCompleted });
                if (isCompleted) {
                    categories[move.category].completed++;
                }
            });
            
            // Update tooltips for moves
            const basicTooltip = document.querySelector('#basicMovesScore').closest('.stat-row').querySelector('.info-tooltip');
            basicTooltip.innerHTML = `
                <div><strong>Basic Power Moves:</strong></div>
                ${categories.basic.moves.map(move => 
                    `<div class="${move.completed ? 'tooltip-completed' : ''}">• ${move.name}</div>`
                ).join('')}
            `;
            
            const intermediateTooltip = document.querySelector('#intermediateMovesScore').closest('.stat-row').querySelector('.info-tooltip');
            intermediateTooltip.innerHTML = `
                <div><strong>Intermediate Power Moves:</strong></div>
                ${categories.intermediate.moves.map(move => 
                    `<div class="${move.completed ? 'tooltip-completed' : ''}">• ${move.name}</div>`
                ).join('')}
            `;
            
            const advancedTooltip = document.querySelector('#advancedMovesScore').closest('.stat-row').querySelector('.info-tooltip');
            advancedTooltip.innerHTML = `
                <div><strong>Advanced Power Moves:</strong></div>
                ${categories.advanced.moves.map(move => 
                    `<div class="${move.completed ? 'tooltip-completed' : ''}">• ${move.name}</div>`
                ).join('')}
            `;
            
            // Calculate transition completion by point ranges
            const transitionCategories = { 
                basic: { completed: 0, total: 0, transitions: [] }, 
                intermediate: { completed: 0, total: 0, transitions: [] }, 
                advanced: { completed: 0, total: 0, transitions: [] } 
            };
            
            const transitionRows = document.querySelectorAll('#transitionsBody tr:not(.total-row)');
            
            transitions.forEach((transition, index) => {
                const points = transition.base * transition.multiplier;
                let category;
                
                if (points <= 20) {
                    category = 'basic';
                } else if (points <= 36) {
                    category = 'intermediate';
                } else {
                    category = 'advanced';
                }
                
                let isCompleted = false;
                if (index < transitionRows.length) {
                    const toggle = transitionRows[index].querySelector('.toggle-switch');
                    if (toggle && toggle.classList.contains('active')) {
                        isCompleted = true;
                        transitionCategories[category].completed++;
                    }
                }
                
                transitionCategories[category].total++;
                transitionCategories[category].transitions.push({ 
                    name: transition.name, 
                    points: points.toFixed(1), 
                    completed: isCompleted 
                });
            });
            
            // Update tooltips for transitions
            const basicTransitionTooltip = document.querySelector('#basicTransitionsCount').closest('.stat-row').querySelector('.info-tooltip');
            basicTransitionTooltip.innerHTML = `
                <div><strong>Basic Transitions (0-20 pts each):</strong></div>
                ${transitionCategories.basic.transitions.map(transition => 
                    `<div class="${transition.completed ? 'tooltip-completed' : ''}">• ${transition.name} (${transition.points} pts)</div>`
                ).join('')}
            `;
            
            const intermediateTransitionTooltip = document.querySelector('#intermediateTransitionsCount').closest('.stat-row').querySelector('.info-tooltip');
            intermediateTransitionTooltip.innerHTML = `
                <div><strong>Intermediate Transitions (21-36 pts each):</strong></div>
                ${transitionCategories.intermediate.transitions.map(transition => 
                    `<div class="${transition.completed ? 'tooltip-completed' : ''}">• ${transition.name} (${transition.points} pts)</div>`
                ).join('')}
            `;
            
            const advancedTransitionTooltip = document.querySelector('#advancedTransitionsCount').closest('.stat-row').querySelector('.info-tooltip');
            advancedTransitionTooltip.innerHTML = `
                <div><strong>Advanced Transitions (>36 pts each):</strong></div>
                ${transitionCategories.advanced.transitions.map(transition => 
                    `<div class="${transition.completed ? 'tooltip-completed' : ''}">• ${transition.name} (${transition.points} pts)</div>`
                ).join('')}
            `;
            
            // Update move completion UI
            Object.keys(categories).forEach(category => {
                const data = categories[category];
                const percentage = (data.completed / data.total * 100);
                
                document.getElementById(`${category}MovesScore`).textContent = 
                    `${data.completed} / ${data.total} (${percentage.toFixed(0)}%)`;
                
                setTimeout(() => {
                    document.getElementById(`${category}MovesProgress`).style.width = `${percentage}%`;
                }, 200);
            });
            
            // Update transition analysis UI
            Object.keys(transitionCategories).forEach(category => {
                const data = transitionCategories[category];
                const percentage = data.total > 0 ? (data.completed / data.total * 100) : 0;
                
                document.getElementById(`${category}TransitionsCount`).textContent = 
                    `${data.completed} / ${data.total} (${percentage.toFixed(0)}%)`;
                
                setTimeout(() => {
                    document.getElementById(`${category}TransitionsProgress`).style.width = `${percentage}%`;
                }, 400);
            });
        }

        function resetAll() {
            // Reset all sliders
            document.querySelectorAll('.slider, .form-slider').forEach(slider => {
                slider.value = '0';
                const label = slider.parentNode.querySelector('.slider-label, .form-slider-label');
                if (slider.classList.contains('special-reps-slider')) {
                    label.textContent = 'None';
                } else if (slider.classList.contains('form-slider')) {
                    label.textContent = 'Select';
                } else {
                    label.textContent = '0';
                }
            });
            
            // Reset toggles
            document.querySelectorAll('.toggle-switch').forEach(toggle => {
                toggle.classList.remove('active');
            });
            
            // Reset totals
            document.querySelectorAll('.total-points').forEach(cell => {
                if (cell.textContent.includes('/')) {
                    const maxValue = cell.textContent.split('/')[1];
                    cell.textContent = `0/${maxValue}`;
                } else if (cell.id) {
                    cell.textContent = '0';
                }
            });
            
            // Hide displays
            document.getElementById('scoreDisplay').style.display = 'none';
            document.getElementById('summarySection').style.display = 'none';
        }

        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', function() {
            buildPowerMovesTable();
            buildTransitionsTable();
        });
    </script>
</body>
</html>
